<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <title>Забыли пароль?</title>
</head>


<body>

<div>


    <form id="ForgotForm" class="container mt-3">
        <h4>Введите свой логин и своё секретное слово</h4>

        <div class="row mb-3">
            <label for="username" class="col-sm-2 col-form-label">Логин:</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="username" name="username" required>

            </div>
        </div>
        <div class="row mb-3">
            <label for="secret" class="col-sm-2 col-form-label">Секретное слово:</label>
            <div class="col-sm-10">
                <input class="form-control" id="secret" name="secret" required>

            </div>
        </div>
        <button onclick="forgot()" class="btn btn-primary">Дальше</button>

    </form>


    <script>
        async function forgot() {


            username = document.getElementById('username').value
            secret = document.getElementById('secret').value


            const response = await fetch(window.location.href, {
                method: 'POST',
                headers: {"Accept": "application/json", "Content-Type": "application/json"},
                body: JSON.stringify({
                    'user': username,
                    'secret': secret
                })
            });


            const responseData = await response.json();
            const isAuthenticated = responseData.isValidated;

            if (isAuthenticated) {
                window.location.href = 'change_password.html'
                document.cookie = "isLogged=true; path=/";
                document.cookie = "user=" + document.getElementById('username').value + '; path=/';
            } else {
                alert('Cant identify you')
            }


        }
    </script>
</div>
<div id="target-div"></div>
<script>forgot();</script> <!-- Вызов функции forgot() -->
</body>